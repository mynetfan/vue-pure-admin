import{a6 as F,d as w,r as s,a as U,c as l,j as $,e as i,k as m,i as E,g as n,w as u,h as O,u as d,m as v,ad as h,F as C,l as q,af as R,f as G,br as H,n as J}from"./index-9aa0448f.js";import K from"./Card-511f5e0b.js";import{m as Q}from"./message-f37dbd81.js";import{_ as W}from"./DialogForm.vue_vue_type_script_setup_true_lang-df3f8983.js";import{u as X}from"./hooks-8f2e44d9.js";import{S as Y}from"./search-4b9e88d3.js";import{A as Z}from"./add-circle-line-438b436c.js";import"./more-2-fill-a666858a.js";const ee=g=>F.request("post","/getCardList",{data:g}),te={class:"main"},ae={class:"w-full flex justify-between mb-4"},ne=w({name:"ListCard"}),pe=w({...ne,setup(g){const y=`
        <path class="path" d="
          M 30 15
          L 28 17
          M 25.61 25.61
          A 15 15, 0, 0, 1, 15 30
          A 15 15, 0, 1, 1, 27.99 7.5
          L 15 15
        " style="stroke-width: 4px; fill: rgba(0, 0, 0, 0)"/>
      `,x={name:"",status:"",description:"",type:"",mark:""},e=s({current:1,pageSize:12,total:0}),p=s([]),_=s(!0),L=async()=>{try{const{data:t}=await ee();p.value=t.list,e.value={...e.value,total:t.list.length}}catch{}finally{setTimeout(()=>{_.value=!1},500)}};U(()=>{L()});const c=s(!1),f=s({...x}),r=s(""),b=t=>{e.value.pageSize=t,e.value.current=1},z=t=>{e.value.current=t},S=t=>{H.confirm(t?`确认删除后${t.name}的所有产品信息将被清空, 且无法恢复`:"","提示",{type:"warning"}).then(()=>{Q("删除成功",{type:"success"})}).catch(()=>{})},k=t=>{c.value=!0,J(()=>{f.value={...t,status:t!=null&&t.isSetup?"1":"0"}})};return(t,o)=>{const I=l("el-button"),V=l("IconifyIconOffline"),D=l("el-icon"),A=l("el-input"),M=l("el-empty"),P=l("el-col"),B=l("el-row"),N=l("el-pagination"),T=$("loading");return i(),m("div",te,[E("div",ae,[n(I,{icon:d(X)(d(Z)),onClick:o[0]||(o[0]=a=>c.value=!0)},{default:u(()=>[O(" 新建产品 ")]),_:1},8,["icon"]),n(A,{style:{width:"300px"},modelValue:r.value,"onUpdate:modelValue":o[1]||(o[1]=a=>r.value=a),placeholder:"请输入产品名称",clearable:""},{suffix:u(()=>[n(D,{class:"el-input__icon"},{default:u(()=>[v(n(V,{icon:d(Y)},null,8,["icon"]),[[h,r.value.length===0]])]),_:1})]),_:1},8,["modelValue"])]),v((i(),m("div",{"element-loading-svg":y,"element-loading-svg-view-box":"-10, -10, 50, 50"},[v(n(M,{description:"暂无数据"},null,512),[[h,p.value.slice(e.value.pageSize*(e.value.current-1),e.value.pageSize*e.value.current).filter(a=>a.name.toLowerCase().includes(r.value.toLowerCase())).length===0]]),e.value.total>0?(i(),m(C,{key:0},[n(B,{gutter:16},{default:u(()=>[(i(!0),m(C,null,q(p.value.slice(e.value.pageSize*(e.value.current-1),e.value.pageSize*e.value.current).filter(a=>a.name.toLowerCase().includes(r.value.toLowerCase())),(a,j)=>(i(),G(P,{key:j,xs:24,sm:12,md:8,lg:6,xl:4},{default:u(()=>[n(K,{product:a,onDeleteItem:S,onManageProduct:k},null,8,["product"])]),_:2},1024))),128))]),_:1}),n(N,{class:"float-right",currentPage:e.value.current,"onUpdate:currentPage":o[2]||(o[2]=a=>e.value.current=a),"page-size":e.value.pageSize,total:e.value.total,"page-sizes":[12,24,36],background:!0,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:b,onCurrentChange:z},null,8,["currentPage","page-size","total"])],64)):R("",!0)])),[[T,_.value]]),n(W,{visible:c.value,"onUpdate:visible":o[3]||(o[3]=a=>c.value=a),data:f.value},null,8,["visible","data"])])}}});export{pe as default};
